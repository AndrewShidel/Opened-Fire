var a=0.9*(window.innerWidth/830);document.getElementById("b").style.zoom=100*a+"%";for(var e=0,g=document.getElementById("pageflip-canvas"),h=g.getContext("2d"),k=0,m=[],n=document.getElementById("book"),p=n.getElementsByTagName("section"),u=0,v=p.length;u<v;u++)p[u].style.zIndex=v-u,m.push({a:1,target:1,page:p[u],b:!1});g.width=950;g.height=380;g.style.top="-60px";g.style.left="-60px";
setInterval(function(){h.clearRect(0,0,g.width,g.height);for(var d=0,w=m.length;d<w;d++){var c=m[d];c.b&&(c.target=Math.max(Math.min(k/400,1),-1));c.a+=0.2*(c.target-c.a);if(c.b||0.997>Math.abs(c.a)){var f=c,j=1-Math.abs(f.a),c=200*(1-f.a),b=400*f.a+c,l=20*j,x=200*Math.max(Math.min(1-f.a,0.5),0),q=200*Math.max(Math.min(j,0.5),0),r=200*Math.max(Math.min(j,0.5),0);f.page.style.width=Math.max(b,0)+"px";h.save();h.translate(475,65);h.strokeStyle="rgba(0,0,0,"+0.05*j+")";h.lineWidth=30*j;h.beginPath();
h.moveTo(b-c,0.5*-l);h.lineTo(b-c,250+0.5*l);h.stroke();try{var s=h.createLinearGradient(b,0,b+q,0);s.addColorStop(0,"rgba(0,0,0,"+0.2*j+")");s.addColorStop(0.8,"rgba(0,0,0,0.0)");h.fillStyle=s;h.beginPath();h.moveTo(b,0);h.lineTo(b+q,0);h.lineTo(b+q,250);h.lineTo(b,250);h.fill();var t=h.createLinearGradient(b-c-r,0,b-c,0);t.addColorStop(0,"rgba(0,0,0,0.0)");t.addColorStop(1,"rgba(0,0,0,"+0.15*j+")");h.fillStyle=t;h.beginPath();h.moveTo(b-c-r,0);h.lineTo(b-c,0);h.lineTo(b-c,250);h.lineTo(b-c-r,250);
h.fill()}catch(y){}f=h.createLinearGradient(b-x,0,b,0);f.addColorStop(0.35,"#fafafa");f.addColorStop(0.73,"#eeeeee");f.addColorStop(0.9,"#fafafa");f.addColorStop(1,"#e2e2e2");h.fillStyle=f;h.strokeStyle="rgba(0,0,0,0.06)";h.lineWidth=0.5;h.beginPath();h.moveTo(b,0);h.lineTo(b,250);h.quadraticCurveTo(b,250+2*l,b-c,250+l);h.lineTo(b-c,-l);h.quadraticCurveTo(b,2*-l,b,0);h.fill();h.stroke();h.restore()}}},1E3/60);n.addEventListener("mousemove",function(d){k=d.clientX/a-n.offsetLeft-415},!1);
n.addEventListener("mousedown",function(d){400>Math.abs(k)&&(0>k&&0<=e-1?m[e-1].b=!0:0<k&&e+1<m.length&&(m[e].b=!0));d.preventDefault()},!1);n.addEventListener("mouseup",function(){for(var d=0;d<m.length;d++)m[d].b&&(0>k?(m[d].target=-1,e=Math.min(e+1,m.length)):(m[d].target=1,e=Math.max(e-1,0))),m[d].b=!1},!1);